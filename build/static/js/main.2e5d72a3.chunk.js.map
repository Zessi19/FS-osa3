{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","PersonNameFilter","nameFilter","handleNameFilterChange","value","onChange","PersonForm","newName","newNumber","handleNameChange","handleNumberChange","addPerson","onSubmit","type","PersonList","personList","deletePerson","style","listStyle","paddingLeft","map","i","key","person","Person","name","number","onClick","AlertNotification","message","className","ErrorNotification","App","useState","persons","setPersons","setNewName","setNewNumber","setNameFilter","alertMessage","setAlertMessage","errorMessage","setErrorMessage","useEffect","PersonService","initialPersons","event","target","preventDefault","searchIndex","findIndex","toLowerCase","returnedPerson","concat","setTimeout","window","confirm","changedPerson","find","catch","error","filter","substring","length","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2e5d72a3.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst del = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nexport default {getAll, create, update, del}","import React, {useState, useEffect} from 'react'\nimport PersonService from './services/persons'\nimport './index.css'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [nameFilter, setNameFilter] = useState('')\n\n  const [alertMessage, setAlertMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleNameFilterChange = (event) => {\n    setNameFilter(event.target.value)\n  }\n\n  useEffect(() => {\n    PersonService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const searchIndex = persons.findIndex(i => i.name.toLowerCase() === newName.toLowerCase())\n\n    if (searchIndex === -1) { \n      const personObject = {\n        name: newName,\n        number: newNumber\n      }\n\n      PersonService\n        .create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n        })\n       \n      setAlertMessage(`Added contact ${newName}`)\n      setTimeout(() => {setAlertMessage(null)}, 5000)\n\n      setNewName('')\n      setNewNumber('')\n\n    } else {\n      const message = `${persons[searchIndex].name} is already added to contacts. Do you want to replace the old number?`\n\n      if (window.confirm(message)) {\n        const person = persons.find(i => i.id === persons[searchIndex].id)\n        const changedPerson = { ...person, number: newNumber }\n\n        PersonService\n          .update(changedPerson.id, changedPerson)\n          .then(returnedPerson => {\n            setPersons(persons.map(i => i.id !== changedPerson.id ? i : returnedPerson))\n\n            setAlertMessage(`Updated contact ${changedPerson.name}`)\n            setTimeout(() => {setAlertMessage(null)}, 5000)\n          })\n          .catch(error => {\n            setPersons(persons.filter(i => i.id !== changedPerson.id))\n  \n            setErrorMessage(`Contact ${changedPerson.name} has already been removed from server`)\n            setTimeout(() => {setErrorMessage(null)}, 5000)\n          })\n        \n        setNewName('')\n        setNewNumber('')\n      }\n    }\n  }\n\n  const deletePerson = (person) => {\n    const message = `Are you sure to delete contact ${person.name}?`\n\n    if (window.confirm(message)){\n      PersonService\n        .del(person.id)\n        .then(returnedPerson => {\n          setPersons(persons.filter(i => i.id !== person.id))\n\n          setAlertMessage(`Deleted contact ${person.name}`)\n          setTimeout(() => {setAlertMessage(null)}, 5000)\n\n          setNewName('')\n          setNewNumber('')\n        })\n    }    \n  }\n\n  const filterPersonsByName = () => {\n    return persons.filter( i => \n      i.name.substring(0, nameFilter.length).toLowerCase() === nameFilter.toLowerCase()\n    )\n  }\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <AlertNotification message={alertMessage}/>\n      <ErrorNotification message={errorMessage}/>\n\n      <PersonNameFilter \n        nameFilter={nameFilter} \n        handleNameFilterChange={handleNameFilterChange}\n      />   \n\n      <h2>Add New Contact</h2>\n      <PersonForm \n        newName = {newName}\n        newNumber = {newNumber}\n        handleNameChange =Â {handleNameChange}\n        handleNumberChange = {handleNumberChange}\n        addPerson = {addPerson}\n      />\n\n      <h2>Contacts</h2>\n      <PersonList \n        personList={filterPersonsByName()}\n        deletePerson={deletePerson}\n      /> \n    </div>\n  )\n}\n\nconst PersonNameFilter = ({nameFilter, handleNameFilterChange}) => {\n  return (\n    <div>\n      <div>Filter contacts by name:</div>\n      <div><input value={nameFilter} onChange={handleNameFilterChange}/></div>\n    </div>\n  )\n}\n\nconst PersonForm = ({newName, newNumber, handleNameChange, handleNumberChange, addPerson}) => {\n  return (\n    <form onSubmit={addPerson}>\n      <div> Name: <input value={newName} onChange={handleNameChange}/></div>\n      <div> Number: <input value={newNumber} onChange={handleNumberChange}/></div>\n      <div><button type=\"submit\"> Add </button></div>\n    </form>\n  )\n}\n\nconst PersonList = ({personList, deletePerson}) => {\n  const contentRows = () => {\n    return personList.map( i => <Person key={i.id} person={i} deletePerson={deletePerson}/> )  \n  }\n\n  return (\n    <ul style={{ listStyle: 'none', paddingLeft: 0 }}> \n      {contentRows()}  \n    </ul>\n  )\n}\n\nconst Person = ({person, deletePerson}) => {\n  return (\n    <li>\n      {person.name} :: {person.number} \n      <button onClick={ () => deletePerson(person)}> Delete </button>\n    </li>\n  )\n}\n\nconst AlertNotification = ({message}) => {\n  if (message === null) {\n    return null\n  }\n  return (\n    <div className=\"alert\"> {message} </div>\n  )\n}\n\nconst ErrorNotification = ({message}) => {\n  if (message === null) {\n    return null\n  }\n  return (\n    <div className=\"error\"> {message} </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n)"],"sourceRoot":""}